<!doctype html><html><head><meta charset="UTF-8"<title>Assignment1</head><body><div id="msgcns!1BE894DEAF296E0A!186" class="bvMsg"><font size="2"> <p>;=====================================================================</p> <p>; Assignment1.asm - Homework Assignment 1</p> <p>;</p> <p>; Author: Sheng_Jiang</p> <p>; Course: COSC 2425</p> <p>; Date: 06/08/05</p> <p>;=====================================================================</p> <p>.386</p> <p>.MODEL flat, stdcall</p> <p>option casemap:none</p> <p>include windows.inc</p> <p>include kernel32.inc</p> <p>include masm32.inc</p> <p>includelib kernel32.lib</p> <p>includelib masm32.lib</p> <p>.DATA</p> <p>;Playing with flags</p> <p>FlagTest BYTE 0</p> <p>SFlagTest SBYTE 0</p> <p>;Summing up a series of unsigned numbers</p> <p>DWORDArray DWORD 1,2,3,4,5,6,7,8,9,10</p> <p>;Sum up all the positive and negative values</p> <p>SDWORDArray SDWORD 1,-2,3,-4,5,-6,7,-8,9,-10</p> <p>.CODE</p> <p>main PROC</p> <p>int 3</p> <p>;Data for Playing with flags</p> <p>mov FlagTest,1;</p> <p>add FlagTest,255 ;set Carry flag ,FlagTest=0</p> <p>add FlagTest,1 ;clear Carry flag ,FlagTest=1</p> <p>sub FlagTest,1 ;set Zero flag ,FlagTest=0</p> <p>add FlagTest,1 ;clear Zero flag ,FlagTest=1</p> <p>sub SFlagTest,2 ;set Sign flag ,SFlagTest=-2</p> <p>add SFlagTest,10 ;clear Sign flag ,SFlagTest=8</p> <p>add SFlagTest,127 ;set Overflow flag ,SFlagTest=135</p> <p>mov SFlagTest,0;</p> <p>sub SFlagTest,100 ;clear Overflow flag,SFlagTest=-100</p> <p>;Summing up a series of unsigned numbers</p> <p>mov edi, OFFSET DWORDArray ;Begin</p> <p>mov ecx, OFFSET DWORDArray+SIZEOF DWORDArray ;End</p> <p>mov eax, 0 ;Initialize Sum</p> <p>Sum1 : </p> <p>add eax, [edi] ;sum</p> <p>add edi, TYPE(DWORDArray) ;step to next</p> <p>cmp ecx, edi ;loop test</p> <p>jne Sum1 ;loop</p> <p>; eax should be 55(37h) now</p> <p>;Sum up all the positive and negative values</p> <p>mov edi, OFFSET SDWORDArray ;Begin</p> <p>mov ecx, OFFSET SDWORDArray+SIZEOF SDWORDArray;End</p> <p>mov eax, 0 ;Initialize Sum</p> <p>mov ebx, 0 ;Initialize Sum</p> <p>Sum2 :</p> <p>mov edx, [edi] ;compare edi with 0</p> <p>cmp edx, 0 </p> <p>jl Sum2Neg ;jump to Sum2Neg, add to ebx if edi is a negative number</p> <p>add eax, [edi] ;otherwise, add to eax</p> <p>jmp Sum2Pos ;done, jump to loop point Sum2Pos</p> <p>Sum2Neg:</p> <p>add ebx, [edi] ;add to ebx if edi is a negative number</p> <p>Sum2Pos:</p> <p>add edi, TYPE(DWORDArray) ;step to next</p> <p>cmp ecx, edi ;loop test</p> <p>jne Sum2 ;loop</p> <p>; eax should be 25(19h) now</p> <p>; ebx should be -30(ffffffe2h) now </p> <p>invoke ExitProcess, 0</p> <p>main ENDP</p> <p>END main</p><font size="2"> <p># makefile for Assignment1</p> <p>PROJECT = Assignment1</p> <p>NAME = Sheng_Jiang</p> <p>Date = 5/25/05</p> <p>ROOTDRIVE = C</p> <p>VERSION = V1</p> <p>SRCS = </p> <p>$(PROJECT).asm</p> <p>makefile </p> <p>MASM32 = $(ROOTDRIVE):/masm32</p> <p>ML = $(MASM32)/bin/ml</p> <p>LINK = $(MASM32)/bin/link</p> <p>Zip = H:/mydoc/Tools/Bin/zip</p> <p>DEBUG = c:/masm32/debug/windbg</p> <p> </p> <p>MLFLAGS = /I. /I $(MASM32)include /Zi /Zd /Zf /c /Fl /coff /Cp</p> <p>LINKFLAGS = /subsystem:console /libpath:$(MASM32)lib /debug </p> <p>DEBUGFLAGS = -QY -g -G -WF $(PROJECT).WEW</p> <p>all: $(PROJECT).exe</p> <p>$(PROJECT).obj: $(PROJECT).asm</p> <p>$(ML) $(MLFLAGS) $(PROJECT).asm</p> <p>$(PROJECT).exe: $(PROJECT).obj</p> <p>$(LINK) $(LINKFLAGS) $(PROJECT).obj</p> <p>clean:</p> <p>del $(PROJECT).exe *.obj *.lst *.map *.pdb *.ilk</p> <p>zip: clean</p> <p>del $(NAME)_$(PROJECT)_$(VERSION).zip</p> <p>$(Zip) $(NAME)_$(PROJECT)_$(VERSION).zip $(SRCS)</p> <p>debug: $(PROJECT).exe</p> <p>$(DEBUG) $(DEBUGFLAGS) $(PROJECT).exe</p> <p> </p></font></font></div></body></html>